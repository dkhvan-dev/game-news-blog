<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	  xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head th:insert="~{/toInsert/head.html}">
	<title>Game Page</title>
</head>
<body onload="getNewsInfo()">
	<!-- Page Preloder -->
	<div th:insert="~{/toInsert/preloader.html}">
	</div>

	<!-- Header section -->
	<header th:insert="~{/toInsert/header.html}">
	</header>
	<!-- Header section end -->

	<!-- Page top section -->
	<section class="page-top-section set-bg" data-setbg="/img/page-top-bg/1.jpg">
		<div class="page-info">
			<h2>News</h2>
			<div class="site-breadcrumb">
				<a th:href="@{'/'}">Home</a>  /
				<a th:href="@{'/allNews'}">News</a>	 /
				<span th:text="${news.newsTitle}"></span>
			</div>
		</div>
	</section>
	<!-- Page top end-->

	<section class="games-single-page">
		<div class="container">
			<div class="game-single-preview">

			</div>
			<div class="row">
				<div class="col-xl-9 col-lg-8 col-md-7">
					<div class="game-single-content">

					</div>
					<div class="geme-social-share pt-5 d-flex">
						<p>Share:</p>
						<a href="https://ru.pinterest.com/"><i class="fa fa-pinterest"></i></a>
						<a href="https://www.facebook.com/"><i class="fa fa-facebook"></i></a>
						<a href="https://twitter.com/"><i class="fa fa-twitter"></i></a>
						<a href="https://www.twitch.tv/"><i class="fa fa-twitch"></i></a>
						<a href="https://github.com/"><i class="fa fa-github"></i></a>
					</div>
				</div>
			</div>
		</div>
	</section>

	<!-- Footer section -->
	<footer class="footer-section" th:insert="~{/toInsert/footer.html}">
	</footer>
	<!-- Footer section end -->

	<!--====== Javascripts & Jquery ======-->
	<div th:insert="~{/toInsert/scripts.html}"></div>

	<script>
		function getNewsInfo() {
			const result = new XMLHttpRequest()
			var url = document.location.href
			let sections = url.split('/');
			let lastSection = sections.pop();
			result.open("GET", "http://localhost:8000/news/" + lastSection)
			result.send()
			result.onload = function () {
				let news = JSON.parse(this.responseText)
				let gameImage = "<img src='/getGameImage/" + news.game.gameImage + "' alt='#'>"
				let content = ""
				content += "<h2 class='gs-title'>" + news.newsTitle + "</h2>"
				content += "<p class='text-white'>" + news.newsDescription + "</p>"
				content += "<p>Date of publication: <span>" + news.newsCreateDate + "</span></p>"

				document.querySelector(".game-single-preview").innerHTML = gameImage
				document.querySelector(".game-single-content").innerHTML = content
			}
		}
	</script>

	</body>
</html>
