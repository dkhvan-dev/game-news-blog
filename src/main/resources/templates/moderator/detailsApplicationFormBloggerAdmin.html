<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head th:insert="~{/toInsert/head.html}">
    <title>Admin Panel</title>
</head>
<body>

    <div th:insert="~{/toInsert/preloader.html}"></div>

    <!-- Header section -->
    <header th:insert="~{/toInsert/header.html}">
    </header>
    <!-- Header section end -->

    <main class="d-flex flex-column profileSection">
        <div class="container mt-3">
            <div class="alert alert-success" role="alert" th:if="${param.success}" th:text="#{successUpdateApp}">

            </div>
            <div class="alert alert-danger" role="alert" th:if="${param.errorUpdateApplication}" th:text="#{failedUpdateApp}">

            </div>
            <div>
                <form class="mb-5" th:action="@{'/updateFormBlogger'}" method="post">
                    <input type="hidden" name="applicationFormBloggerId" th:value="${applicationForm.applicationFormBloggerId}">
                    <div class="mt-3">
                        <label>
                            <span th:text="#{descriptionFeedback} + ':'"></span> <br>
                            <textarea class="form-control" name="applicationFormBloggerDescription" th:text="${applicationForm.applicationFormBloggerDescription}" th:readonly="${!canUpdateApplication}"></textarea>
                        </label>
                    </div>
                    <div class="mt-3">
                        <label>
                            <span th:text="#{receiptDate} + ':'"></span> <br>
                            <input type="date" class="form-control" name="receiptDate" th:value="${applicationForm.applicationFormBloggerReceiptDate}"
                                   readonly>
                        </label>
                    </div>
                    <div class="mt-3">
                        <label>
                            <span th:text="#{updateDate} + ':'"></span> <br>
                            <input type="date" class="form-control" name="updateDate" th:value="${applicationForm.applicationFormBloggerUpdateDate}"
                                   th:readonly="${!canUpdateApplication}">
                        </label>
                    </div>
                    <div class="mt-3">
                        <span th:text="#{author} + ':'"></span>
                        <span th:text="${applicationForm.getUsers().getUserFirstName() + ' ' + applicationForm.getUsers().getUserSurname()}"></span>
                        <input type="hidden" name="authorId" th:value="${applicationForm.getUsers().getUserId()}">
                    </div>
                    <div class="mt-3">
                        <input type="text" class="form-control" th:value="${applicationForm.getApplicationBloggerStatus().applicationBloggerStatus}"
                               th:if="${!canUpdateApplication}"
                               th:style="${'color: ' + applicationForm.getApplicationBloggerStatus().applicationBloggerStatusColor}" readonly>
                        <select class="form-select" name="applicationBloggerStatus" th:if="${canUpdateApplication}">
                            <option th:each="applicationBloggerStatus : ${allBloggerStatus}" th:text="${applicationBloggerStatus.applicationBloggerStatus}"
                                    th:value="${applicationBloggerStatus.applicationBloggerStatusId}"
                                    th:selected="${applicationBloggerStatus.applicationBloggerStatusId == applicationForm.getApplicationBloggerStatus().getApplicationBloggerStatusId()}"
                                    th:style="'color: ' + ${applicationBloggerStatus.applicationBloggerStatusColor}"></option>
                        </select>
                    </div>
                    <div class="mt-3">
                        <span th:if="${param.success}" th:text="'Updated by ' + ${#authorization.getAuthentication().getPrincipal().getUserFirstName() + ' ' + #authorization.getAuthentication().getPrincipal().getUserSurname()}"></span>
                    </div>
                    <button class="btn btn-primary mt-3" th:if="${canUpdateApplication}" th:text="#{updateApp}"></button>
                </form>
            </div>

        </div>

    </main>

    <!-- Footer section -->
    <footer class="footer-section" th:insert="~{/toInsert/footer.html}">
    </footer>
    <!-- Footer section end -->

    <div th:insert="~{/toInsert/scripts.html}"></div>
</body>
</html>
